<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
	<style></style>
</head>
<body>
	<div id="div_trabajo">
        <h2>Enviar datos a php con fetch y metodo post</h2>

		<input type="button" id="btn_enviarjson" value="inserta">
		<p id="mip"></p>
	</div>
	<script>
	//http://localhost/ejercicios/etc/php/enviar-post-fetch-a-php.html
    //{google:ok,opera:ok,firefox:ok,ie:false}
		window.onload=function(){
			document.getElementById("btn_enviarjson").onclick = function(){
                var request = new Request('recibePOST.php', {
                    method: 'post',
                    headers: {'Content-Type':'application/x-www-form-urlencoded'},
                    body: 'movimiento=1&id=1&nombre=luisito&apellido=rosales&edad=45'
                });
                fetch(request).then(function(returnedValue) {
                    if(returnedValue.ok){
                        console.log("operacion correcta");
                        returnedValue.text().then((txt)=>{
                            console.log('muestro respuesta: ', txt);
                            document.write('muestro respuesta: ', txt);
                        });
                    }
                }).catch(function(err) {
                    console.log(err);
                });
		    };
        }
	</script>
</body>
</html>
